# =============================================
# Exam Grader Environment Configuration
# Copy this file to .env and customize the values for your environment
# =============================================

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
HOST=127.0.0.1
PORT=8501
DEBUG=False
TESTING=False
THREADED=True
MAX_BATCH_WORKERS=5
BATCH_PROCESSING_SIZE=5

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=sqlite:///exam_grader.db
DB_POOL_SIZE=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_BUSY_TIMEOUT=30000
DB_CACHE_SIZE=64000

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_TIMEOUT=60
API_RETRY_ATTEMPTS=5
API_RETRY_DELAY=2.0
API_MAX_RETRIES=10
API_MAX_BACKOFF_DELAY=60.0

# =============================================================================
# LLM SERVICE CONFIGURATION
# =============================================================================
LLM_BASE_URL=https://api.deepseek.com/v1
LLM_MODEL=deepseek-chat
DEEPSEEK_API_KEY=your_deepseek_api_key_here
LLM_API_KEY=your_deepseek_api_key_here
LLM_CONNECTION_POOL_SIZE=5
LLM_RETRY_ATTEMPTS=5
LLM_RETRY_DELAY=2.0
LLM_JSON_TIMEOUT=30.0
LLM_RETRY_ON_JSON_ERROR=3
LLM_VISION_MAX_FILE_SIZE=20MB


# LLM Rate Limiting (set to high values for unlimited usage)
LLM_REQUESTS_PER_MINUTE=1000
LLM_REQUESTS_PER_HOUR=10000

# LLM Timeout Configuration (increased for large requests)
TIMEOUT_LLM_PROCESSING=1200
LLM_JSON_TIMEOUT=60.0

# =============================================================================
# OCR SERVICE CONFIGURATION
# =============================================================================
HANDWRITING_OCR_API_KEY=your_handwriting_ocr_api_key_here
OCR_BASE_URL=https://www.handwritingocr.com/api/v3
OCR_REQUEST_TIMEOUT=30
OCR_RETRY_DELAY=5
OCR_MAX_RETRIES=3

# =============================================================================
# FILE PROCESSING CONFIGURATION
# =============================================================================
MAX_FILE_SIZE_MB=100
MAX_STORAGE_SIZE_MB=10000
UPLOAD_DIR=uploads
TEMP_DIR=temp
OUTPUT_DIR=output
LOGS_DIR=logs
INSTANCE_DIR=instance
CLEANUP_INTERVAL_HOURS=24
STORAGE_EXPIRATION_DAYS=30

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_DEFAULT_SIZE=10000
CACHE_DEFAULT_TTL=86400
CACHE_L1_SIZE=5000
CACHE_L2_SIZE=50000
CACHE_TIMEOUT=3600

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
SECRET_KEY=your_32_character_secret_key_here_123456789
SESSION_TIMEOUT=3600
MAX_CONCURRENT_SESSIONS=3
MAX_FAILED_ATTEMPTS=5
LOCKOUT_DURATION=15
PASSWORD_MAX_LENGTH=128
MIN_SECRET_KEY_LENGTH=32

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=3600
LOGIN_ATTEMPTS_PER_MINUTE=5
BURST_LIMIT=10
RATE_LIMIT_WINDOW=3600

# =============================================================================
# PROCESSING CONFIGURATION
# =============================================================================
PROCESSING_MAX_ATTEMPTS=3
PROCESSING_BASE_DELAY=1.0
PROCESSING_MAX_DELAY=30.0
PROCESSING_EXPONENTIAL_BASE=2.0
PROCESSING_JITTER=True
PROCESSING_BACKOFF_MULTIPLIER=1.5
FALLBACK_TIMEOUT_SECONDS=30
MAX_FALLBACK_ATTEMPTS=2

# =============================================================================
# TIMEOUT CONFIGURATION
# =============================================================================
TIMEOUT_OCR_PROCESSING=180
TIMEOUT_LLM_PROCESSING=600
TIMEOUT_FILE_PROCESSING=90
TIMEOUT_MAPPING_SERVICE=180
TIMEOUT_GRADING_SERVICE=600
TIMEOUT_HEALTH_CHECK=30
TIMEOUT_SERVICE_INIT=60
TIMEOUT_DEFAULT=60
TIMEOUT_STANDARD_REQUEST=60
TIMEOUT_ANTIWORD=30
TIMEOUT_TESSERACT=5
SUBMISSION_PROCESSING_TIMEOUT=120
DEFAULT_PROCESSING_TIMEOUT=300
DEFAULT_MAX_RETRY_ATTEMPTS=3
DEFAULT_SESSION_TIMEOUT=120

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
MAX_MEMORY_MB=1024
MAX_CPU_PERCENT=80
MAX_CONCURRENT_OPERATIONS=10
MAX_CONCURRENT_PROCESSES=4
MEMORY_LIMIT_GB=4
CONNECTION_LIMIT=200
MAX_REQUEST_BODY_SIZE=104857600

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=INFO
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
LOG_ENCODING=utf-8

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
MONITORING_ENABLED=True
MONITORING_CHECK_INTERVAL=30
RESPONSE_TIME_WARNING_MS=5000
RESPONSE_TIME_CRITICAL_MS=10000
ERROR_RATE_WARNING=0.05
ERROR_RATE_CRITICAL=0.1
CPU_WARNING=80
CPU_CRITICAL=95
MEMORY_WARNING=85
MEMORY_CRITICAL=95
DISK_WARNING=90
DISK_CRITICAL=95

# =============================================================================
# SECURITY HEADERS AND CORS
# =============================================================================
ALLOWED_ORIGINS=http://localhost:8501,http://127.0.0.1:8501,https://*.onrender.com,https://*.render.com
SECRETS_MASTER_KEY=your_master_key_here

# =============================================================================
# ENCODING AND LOCALE
# =============================================================================
ENCODING=utf-8
PYTHONIOENCODING=utf-8

# =============================================================================
# FLASK CONFIGURATION
# =============================================================================
FLASK_APP=webapp.app
FLASK_ENV=development

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Set to true on Render.com to skip LLM connectivity tests during startup
RENDER=true
SKIP_LLM_INIT_TEST=false
FAST_STARTUP=false